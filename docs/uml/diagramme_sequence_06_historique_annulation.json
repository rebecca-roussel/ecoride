{
  "title": "diagramme_sequence_06_historique_annulation",
  "diagramType": "sequence",
  "participants": [
    {
      "id": "2026-01-18T23:54:50.921Z",
      "type": "actor",
      "alias": "Utilisateur",
      "label": "Utilisateur"
    },
    {
      "id": "2026-01-18T23:56:15.206Z",
      "type": "participant",
      "alias": "IHM",
      "label": "Interface (UI)"
    },
    {
      "id": "2026-01-18T23:56:24.231Z",
      "type": "participant",
      "alias": "API",
      "label": "Serveur"
    },
    {
      "id": "2026-01-18T23:56:43.355Z",
      "type": "database",
      "alias": "BDD",
      "label": "BDD (PostgreSQL)"
    }
  ],
  "sequence": [
    {
      "type": "message",
      "from": "Utilisateur",
      "to": "IHM",
      "arrow": "->",
      "label": "Ouvre \"Historique\"",
      "id": "37342707-6ff4-451a-b195-47eef0e206c3"
    },
    {
      "type": "message",
      "from": "IHM",
      "to": "API",
      "arrow": "->",
      "label": "GET /historique",
      "id": "ef4dad78-06f2-46bd-95eb-e8264da0939f"
    },
    {
      "type": "message",
      "from": "API",
      "to": "BDD",
      "arrow": "->",
      "label": "SELECT covoiturages (utilisateur)",
      "id": "0fc87362-9c6c-4d15-87c6-cdc496be8186"
    },
    {
      "type": "message",
      "from": "BDD",
      "to": "API",
      "arrow": "-->",
      "label": "Liste covoiturages",
      "id": "420e82ee-2db6-4c56-8647-15810c0023a4"
    },
    {
      "type": "message",
      "from": "API",
      "to": "IHM",
      "arrow": "-->",
      "label": "Retourne historique",
      "id": "77fdef1a-78e8-4592-bf3e-2b76c6447d9b"
    },
    {
      "type": "message",
      "from": "IHM",
      "to": "Utilisateur",
      "arrow": "-->",
      "label": "Affiche historique",
      "id": "90089bb2-12e8-4781-86f7-80d760d9afb6"
    },
    {
      "type": "fragment_start",
      "kind": "opt",
      "label": "Annuler un covoiturage",
      "id": "baca83be-ffe8-4041-84da-8370b032596e"
    },
    {
      "type": "message",
      "from": "Utilisateur",
      "to": "IHM",
      "arrow": "->",
      "label": "Clique \"Annuler\"",
      "id": "d9a87115-2986-41ef-9146-6589d199d4d2"
    },
    {
      "type": "message",
      "from": "IHM",
      "to": "API",
      "arrow": "->",
      "label": "POST /annulations (covoiturage_id)",
      "id": "9db03de5-c1fc-4ea1-9eaa-bef1157cd02e"
    },
    {
      "type": "fragment_start",
      "kind": "alt",
      "label": "[OUI] Chauffeur",
      "id": "ef901ffc-2900-40f9-98a0-b86a275cf50a"
    },
    {
      "type": "message",
      "from": "API",
      "to": "BDD",
      "arrow": "->",
      "label": "UPDATE covoiturage SET statut = \"annulé\"",
      "id": "b06a828b-b97c-488d-866e-3f719064e752"
    },
    {
      "type": "message",
      "from": "API",
      "to": "BDD",
      "arrow": "->",
      "label": "UPDATE participations SET statut = \"annulée\"",
      "id": "f3dfc9cc-dde3-49e6-b9f1-95e868b0ae77"
    },
    {
      "type": "message",
      "from": "API",
      "to": "BDD",
      "arrow": "->",
      "label": "Rembourse crédits aux passagers",
      "id": "672a5406-0356-4a91-adeb-20e65a59d291"
    },
    {
      "type": "message",
      "from": "BDD",
      "to": "API",
      "arrow": "-->",
      "label": "OK",
      "id": "2c915a99-92f6-4294-b96d-6d4e7d8ec8d8"
    },
    {
      "type": "message",
      "from": "API",
      "to": "IHM",
      "arrow": "-->",
      "label": "Covoiturage annulé",
      "id": "fe8083d8-95e6-4fe4-9d3c-a53d3308de44"
    },
    {
      "type": "message",
      "from": "IHM",
      "to": "Utilisateur",
      "arrow": "-->",
      "label": "Confirmation annulation",
      "id": "ffaf028b-f50a-4d22-83fd-d9abab3e69e3"
    },
    {
      "type": "fragment_else",
      "kind": "alt",
      "label": "[NON] Passager",
      "id": "110d4afb-0674-4a9e-872c-a876bedcf3f0"
    },
    {
      "type": "message",
      "from": "API",
      "to": "BDD",
      "arrow": "->",
      "label": "UPDATE participation SET statut = \"annulée\"",
      "id": "00a94600-e5d5-4326-80f7-2a5676dcecea"
    },
    {
      "type": "message",
      "from": "API",
      "to": "BDD",
      "arrow": "->",
      "label": "Rembourse crédits passager",
      "id": "f3facda1-875b-45de-9d41-0ba4085979df"
    },
    {
      "type": "message",
      "from": "BDD",
      "to": "API",
      "arrow": "-->",
      "label": "OK",
      "id": "7b97a58e-9092-4d8d-9def-c5d32d4b6ec7"
    },
    {
      "type": "message",
      "from": "API",
      "to": "IHM",
      "arrow": "-->",
      "label": "Participation annulée",
      "id": "65608eed-d9f6-4534-b34a-84152b97e794"
    },
    {
      "type": "message",
      "from": "IHM",
      "to": "Utilisateur",
      "arrow": "-->",
      "label": "Confirmation annulation",
      "id": "68a0b544-63fd-48e1-b226-04bb286f48cd"
    },
    {
      "type": "fragment_end",
      "kind": "alt",
      "label": "",
      "id": "0ee702ab-0837-45c1-9f47-25fb280137af"
    },
    {
      "type": "fragment_end",
      "kind": "opt",
      "label": "",
      "id": "885336b8-14fd-406e-af57-9ea1d22c52b2"
    }
  ]
}